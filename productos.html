<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TecnoðŸ¥­Rivas | Productos</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link rel="stylesheet" href="css/style.css">

<style>
.product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 20px;
}
.product-card {
    background: #fff;
    padding: 15px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    text-align: center;
    transition: transform 0.2s;
}
.product-card:hover { transform: translateY(-5px); }
.product-card img {
    width: 100%;
    height: 180px;
    object-fit: contain;
    margin-bottom: 10px;
    border-radius: 8px;
}
.product-card h3 { margin: 8px 0; font-size: 18px; }
.product-card p { margin: 5px 0; color: #555; }
.btn-comprar {
    background: #25d366;
    color: #fff;
    border: none;
    padding: 10px 15px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
}
.btn-comprar:hover { background: #1ebe57; }
.banner-container {
    position: relative;
    max-height: 400px;
    overflow: hidden;
}
.banner-slide {
    width: 100%;
    position: absolute;
    opacity: 0;
    transition: opacity 1s ease-in-out;
}
.intro {
    max-width: 900px;
    margin: 30px auto;
    text-align: center;
}
</style>
</head>

<body>

<header>
<div class="container-header">
    <h1 class="logo">TecnoðŸ¥­Rivas</h1>
    <nav id="navbar">
        <a href="index.html"><i class="fa-solid fa-house"></i> Inicio</a>
        <a href="productos.html"><i class="fa-solid fa-box-open"></i> Productos</a>
        <a href="servicios.html"><i class="fa-solid fa-print"></i> Servicios</a>
        <a href="carrito.html"><i class="fa-solid fa-cart-shopping"></i> Carrito</a>
        <a href="contacto.html"><i class="fa-solid fa-envelope"></i> Contacto</a>
    </nav>
    <div class="menu-toggle" id="mobile-menu">MENU <i class="fa-solid fa-bars"></i></div>
</div>
</header>

<!-- BANNER -->
<div class="banner-container">
    <img class="banner-slide" src="img/banner1.jpg">
    <img class="banner-slide" src="img/banner2.jpg">
    <img class="banner-slide" src="img/banner3.jpg">
    <img class="banner-slide" src="img/banner4.jpg">
    <img class="banner-slide" src="img/banner5.jpg">
</div>

<section class="intro">
<h1>Nuestros Productos</h1>
<p>Explora nuestra amplia variedad de productos de librerÃ­a y accesorios tecnolÃ³gicos.</p>
</section>

<!-- BUSCADOR -->
<div class="buscador-productos">
    <input type="text" id="buscador" placeholder="ðŸ” Buscar producto..." autocomplete="off">
</div>

<section class="promos">
<div id="product-list" class="product-grid"></div>
</section>

<footer>
<div class="footer-container">
    <p>&copy; 2025 TecnoðŸ¥­Rivas</p>
    <div class="redes">
        <a href="https://www.facebook.com/p/Tecno-Rivas-100040930213703/?locale=es_LA" target="_blank">
            <i class="fab fa-facebook-f"></i> Facebook
        </a>
        <a href="https://www.instagram.com/tecnorivas2025/" target="_blank">
            <i class="fab fa-instagram"></i> Instagram
        </a>
        <a href="https://wa.me/50557733013" target="_blank">
            <i class="fab fa-whatsapp"></i> WhatsApp
        </a>
    </div>
</div>
</footer>

<script>
// ============================
// VARIABLES GLOBALES
// ============================
let productosGlobal = [];

// ============================
// CALLBACK JSONP
// ============================
function procesarProductos(productos) {
    productosGlobal = productos;
    mostrarProductos(productos);
}

// ============================
// MOSTRAR PRODUCTOS
// ============================
function mostrarProductos(productos) {
    const productList = document.getElementById("product-list");
    productList.innerHTML = "";

    if (productos.length === 0) {
        productList.innerHTML = "<p>No se encontraron productos.</p>";
        return;
    }

    productos.forEach(item => {
        if (!item.producto) return;

        const card = document.createElement("div");
        card.className = "product-card";

        const imgSrc = item.imagen?.startsWith("http") ? item.imagen : "img/" + item.imagen;

        card.innerHTML = `
            <img src="${imgSrc}">
            <h3>${item.producto}</h3>
            <p>${item.descripcion || ""}</p>
            <p class="precio">C$ ${item.precio || ""}</p>
            <button class="btn-comprar">
                <i class="fa-solid fa-cart-plus"></i> AÃ±adir al carrito
            </button>
        `;

        card.querySelector("button").onclick = () => agregarAlCarrito({
            producto: item.producto,
            precio: item.precio,
            imagen: imgSrc
        });

        productList.appendChild(card);
    });
}

// ============================
// BUSCADOR
// ============================
document.getElementById("buscador").addEventListener("input", function () {
    const texto = this.value.toLowerCase();
    const filtrados = productosGlobal.filter(item =>
        item.producto?.toLowerCase().includes(texto) ||
        item.descripcion?.toLowerCase().includes(texto)
    );
    mostrarProductos(filtrados);
});

// ============================
// CARGAR SHEETS
// ============================
const script = document.createElement("script");
script.src = "https://script.google.com/macros/s/AKfycbxHgG51TDptJQJ_xrBYMarfArc6ogbSYMBuMC-OnQLJLZ2ka0sEEQ_F0Yg_pkkkgBPOQA/exec?callback=procesarProductos";
document.body.appendChild(script);

// ============================
// CARRITO
// ============================
function agregarAlCarrito(producto) {
    const carrito = JSON.parse(localStorage.getItem("carrito")) || [];
    carrito.push(producto);
    localStorage.setItem("carrito", JSON.stringify(carrito));
    alert(`${producto.producto} fue aÃ±adido al carrito`);
}

// ============================
// BANNER
// ============================
let slideIndex = 0;
function iniciarBanner() {
    const slides = document.getElementsByClassName("banner-slide");
    function showSlides() {
        for (let i = 0; i < slides.length; i++) slides[i].style.opacity = 0;
        slideIndex = (slideIndex + 1) > slides.length ? 1 : slideIndex + 1;
        slides[slideIndex - 1].style.opacity = 1;
        setTimeout(showSlides, 4000);
    }
    showSlides();
}

// ============================
// MENÃš MÃ“VIL
// ============================
const menuToggle = document.getElementById("mobile-menu");
const navbar = document.getElementById("navbar");
menuToggle.onclick = () => navbar.classList.toggle("active");

window.addEventListener("DOMContentLoaded", iniciarBanner);
</script>

</body>
</html>
